# MCP Dynamic client registration

Your goal is to implement a basic set of components that we will use later to build a robust OAuth2.1 flow for MCP.

# Functional requirements
- MCP Client can attempt to register itself via `/api/v1/authz/clients/register/mcp/:mcp_server_id/:version`
  - this endpoint already exists without the `/mcp/:mcp_server_id/:version` part
  - add that part to the path to indicate that this client is attempting to connect to an MCP server
  - We must validate that the mcp server exists (ignore version for now, just id)
  - If successful, we:
    - Create a client entity
    - Create an Authorization Journey with timestamps
    - Create an MCP Authorization Flow and link it to the MCP Server, Client ID, and Authorization Journey we just created
    - Return the client data to the caller


# Entities to create

Authorization Journey
- tracks the end 2 end authorization flow
- useful for storing state, codes, etc
- created when a client attempts to register
- has an MCP authorization flow that will be tracked in a separate entity
- has 0-many downstream authorization flow that will be tracked in a separate entity

MCP Authorization Flow
- links to an authorization journey by id
- links to an MCP Server by id
- links to an MCP Client by id

Downstream Authorization Flow
- links to an authorization journey by id
- links to an MCP client and MCP server (maybe we don't need to make this explicit, since we can resolve it via authorization_journey > mcp authorization flow > mcp server && mcp client)
- links to an mcp connection (this has its own entity)
  - mcp connection must belong to the mcp server that this flow relates to

# Tech stuff
- If you decide to implement this as separate modules, don't interact with entities from other modules directly. Consume them via importing module > service.
- Follow best practices for entities detailed in docs/*
- Follow best practices for controllers detailed in docs/*
- Follow best practices for DTOs detailed in docs/*
- Follow best practices for errors detailed in docs/*
